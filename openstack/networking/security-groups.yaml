---
# Standard Security Group Templates
# Apply via Terraform (networking module) â€” do NOT create manually

security_groups:
  - name: ax-web
    description: "HTTP/HTTPS inbound"
    rules:
      - direction: ingress
        protocol: tcp
        port_range: "80"
        remote_ip_prefix: "0.0.0.0/0"
      - direction: ingress
        protocol: tcp
        port_range: "443"
        remote_ip_prefix: "0.0.0.0/0"
      - direction: egress
        protocol: any
        remote_ip_prefix: "0.0.0.0/0"

  - name: ax-ssh-internal
    description: "SSH from management CIDR only"
    rules:
      - direction: ingress
        protocol: tcp
        port_range: "22"
        remote_ip_prefix: "10.0.0.0/8"

  - name: ax-k8s-node
    description: "Kubernetes node inter-node communication"
    rules:
      - direction: ingress
        protocol: tcp
        port_range: "6443"
        remote_ip_prefix: "10.0.0.0/8"
      - direction: ingress
        protocol: tcp
        port_range: "2379-2380"
        remote_ip_prefix: "10.0.0.0/8"
      - direction: ingress
        protocol: tcp
        port_range: "10250-10252"
        remote_ip_prefix: "10.0.0.0/8"
      - direction: ingress
        protocol: tcp
        port_range: "30000-32767"
        remote_ip_prefix: "10.0.0.0/8"
      - direction: ingress
        protocol: udp
        port_range: "4789"
        remote_ip_prefix: "10.0.0.0/8"

  - name: ax-monitoring
    description: "Prometheus scrape"
    rules:
      - direction: ingress
        protocol: tcp
        port_range: "9090-9100"
        remote_ip_prefix: "10.0.0.0/8"

  - name: ax-db-internal
    description: "Database access from app tier only"
    rules:
      - direction: ingress
        protocol: tcp
        port_range: "5432"
        remote_ip_prefix: "10.10.0.0/16"
      - direction: ingress
        protocol: tcp
        port_range: "3306"
        remote_ip_prefix: "10.10.0.0/16"
      - direction: ingress
        protocol: tcp
        port_range: "6379"
        remote_ip_prefix: "10.10.0.0/16"
